# Monitoramente de Bebedouro IoT
Disciplina: IMD0902 - Internet das Coisas - 2022.2
Orientador: Prof. Heitor Medeiros Florencio
Universidade Federal do Rio Grande do Norte


## Descrição do projeto:
O projeto tem como objetivo monitorar algum ambiente através da captação de algumas variáveis. Como ponto inicial, decidiu-se que a meta do projeto seria entender o comportamento das pessoas no IMD em relação à água potável. Esse projeto consistiu na realização do monitoramento de um bebedouro de água através de um dispositivo IoT, que foi construído com um microcontrolador ESP32 DEVKIT V4 atrelado a dois sensores: Vibração e Presença, pelos quais, se tornou possível detectar a troca de galão e a presença de pessoas bebendo água. Seguindo, os dados foram transportados para internet via WiFi ao broker MQTT do AdaFruit, que foi escolhido como plataforma IoT.

## Introdução:
Esse projeto consiste no monitoramento de um bebedouro de água – a Coisa – o ambiente escolhido foi o Instituto Metrópole Digital. A problemática a ser resolvida é entender o comportamento dos alunos e funcionários do IMD em relação à água potável, assim, conseguimos perceber quantas pessoas beberam água e quais foram os horários com maior fluxo. Além disso, saber a quantidade de trocas de galões no intervalo monitorado para reconhecer quantos litros foram consumidos pelas pessoas. Com o monitoramento foi possível recolher os dados de quantas pessoas usaram o bebedouro e quantas vezes ocorreu a troca do galão de água. Após o desenvolvimento do código para a parte lógica e recebimento de dados, o projeto usou fisicamente: Um protoboard (matriz de contato), um ESP32 DEVKIT V4, um sensor de distância (HC-SR04), um sensor de vibração (SW 420), e um Raspberry PI. Além disso, para enviar os dados das variáveis foi utilizado os protocolos de comunicação: WiFi (protocolo físico) e um broker MQTT atrelado a plataforma IoT.

## Arquitetura:
A aplicação tem como núcleo da sua arquitetura o microcontrolador ESP32 DEVKIT V4, no qual estão conectados dois sensores: o sensor de distância HC-SR04 e o sensor de vibração SW-420. Os dados do sensor de distância são usados para computar a quantidade de pessoas que bebem água no bebedouro monitorado, já os dados do sensor de vibração são usados para contabilizar a quantidade de galões trocados. Os dados captados dos referidos sensores são transmitidos para a internet através da placa WiFi do microcontrolador ESP32. O protocolo de comunicação adotado foi o Message Queuing Telemetry Transport (MQTT) embutido na plataforma IoT. O AdaFruit IO foi a plataforma IoT escolhida para receber e armazenar os dados, que são apresentados em Dashboards. Após isso, o Raspberry PI foi utilizado para o recebimento de dados no broker e tratá-los, fazendo o cálculo da média de tempo em que ocorre a troca de galão, e enviando um aviso que a água está acabando para o email do suporte do IMD. A figura abaixo apresenta o esquema da arquitetura IoT no projeto em forma de diagrama:
